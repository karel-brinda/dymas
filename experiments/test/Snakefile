import smbl
import sys
import rnftools

sys.path.insert(0, "../../dymas")
import dymas

##############################
##############################

rnftools.mishmash.sample("simple_example",reads_in_tuple=1)

rnftools.mishmash.ArtIllumina(
	fasta=smbl.fasta.EXAMPLE_1,
	number_of_read_tuples=10000,
	read_length_1=100,
	read_length_2=0,
)

fq="simple_example.fq"

##############################
##############################


bwa = dymas.Mapping_BwaMem()

reads = dymas.Reads_Dyn(
		reads=10000,
		fastq_1_fn=fq,
		iterations=30,
	)

consensus = dymas.Consensus_SamTools()

experiment = dymas.Experiment(
		experiment_name="test_experiment",
		starting_reference_fasta_fn=smbl.fasta.EXAMPLE_1,
		mapping_object=bwa,
		reads_object=reads,
		consensus_object=consensus,
	)

##############################
##############################

# print(
# 		[
# 			rnftools.input(),
# 			experiment.input(),
# 		]


# 	)

include: rnftools.include()
include: smbl.include()

rule:
	input:
		[
			rnftools.input(),
			experiment.input(),
		]

